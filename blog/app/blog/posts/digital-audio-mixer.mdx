---
title: 'Digital Audio Mixer: A full-fledged digital mixer featuring AI-powered automix (WIP)'
publishedAt: '2024-07-25'
summary: 'Some of my thoughts, research, and experimentation on constructing a digital audio mixer'
image: '/blog-assets/digital-audio-mixer/images/Band.jpg'
---


# The Problem and the Idea

![The band](/blog-assets/digital-audio-mixer/images/Band.jpg)

As someone who's been involved in a band, I've been made acutely aware of both the bulk and setup overhead involved with running a live gig. 
This includes but is not limited to: 
* Lugging around two cars worth of amps, pedalboards, synths, cables, etc.
* Plugging in a rats nest of cables
* Repeatedly yelling at guitarists to turn their amps up and down. 
    * The real life version of binary search (but for gain staging)

Getting everyone plugged in and set up + bashing out a competent mix requires some inhuman amount of patience and speed. As a musician and engineer, I felt that there had to be a way to optimize this workflow. 
The somewhat straightforward solution is to plug into a single mixer board and run everything through a PA. This improves on some aspects of setup. A consolidated control center and patch bay definitely improves the speed
of achieving a competent mix. However, many challenges associated with gain staging, effects, and parameter recall aren't really solved until you start getting into the realm of expensive digital mixers. 
So, I had an idea. I am working alongside some of my fellow band members to bring to life an economical digital mixer with an AI powered auto-mix algorithm to streamline this process. What does this look like in design? 
Keep reading, and I'll explain the details. 

# Form Factor

![Mixer Mockup](/blog-assets/digital-audio-mixer/images/MixerMockupCropped.png)

This is an early mockup of what the device might look like. It's optimistically slim and features touchscreen control, a plethora of inputs, and knobs for gain/volume. 
It follows a conventional form factor for digital mixers. However, future iterations may eliminate physical control entirely. 

The vision we had was to control the mixer through an app connected over LAN. This is a standard industry practice, however it's only commonly found in high-end, static setups 
located in concert venues. It's our vision to bring this to something with a smaller, mobile form factor. This will enable the band's engineer to make mixes on their phone or tablet from audience perspective,
which is crucial to a good sounding and expedient mix. Without wireless control, the engineer would have to repeatedly make trips between the audience's position and the mixer board.

The board I/O may be iterated upon in the future as well. We've seen mobile mixers on the market with convenient AUX ins and Bluetooth I/O. This allows the band to easily incorporate backing tracks into the performance.

# Mixer Architecture and Part Selection

![Mixer Block Diagram](/blog-assets/digital-audio-mixer/images/MixerArchitecture.png)

Here's a block diagram of the mixer. Most of it falls under the category of 'reinventing the wheel.' Communication between components is handled by I2C and I2S for control signals and audio streams, respectively. 

## Microcontrollers

The most unconventional design feature is the use of a Raspberry Pi SBC in combination with an xCORE microcontroller. We originally intended to use just a Raspberry Pi for all DSP, control, and AI purposes. However, we quickly
ran into hurdles with its IO and the multi-threaded nature of the project. With ~8 streams of audio, the 4 cores of the Pi would run us a huge challenge of parallel processing. No semaphores and locks for us today, thanks. 

With that in mind, we
took a look at what the industry uses and came across the XMOS xCORE line of microcontrollers. The selling point of the xCORE MCUS is its extremely multi-threaded nature, with MCUs available in up to 32 core configurations. This would be ample for our DSP purposes.
We decided to keep the Pi for other purposes, partly because we had it, and partly because it would make our life easy in terms of smashing together a usable GUI and running our AI model. If this product ever
makes it to production, we would probably port over the AI capabilities to the xCORE (with their new line of chips featuring a dedicated vector ALU!) and control to a STM32 chip or something similar. 

## Electrical Hardware

The hardware of the mixer needs to handle two main tasks, amplication and conversion. Let's begin with amplication, or more specifically, mic/instrument preamps.

### Electrical Hardware: Preamps

What are preamps? Amps before your amps? What are you talking about? 

In audio, there are three main 



# Auto-Mix Feature

One of the novel features we envisioned was an AI-powered automix feature. 

## Workflow 

![Mixer Workflow](/blog-assets/digital-audio-mixer/images/MixerWorkflow.png)


## algorithm







